# Курс: Программирование микроконтроллеров
# Практическое занятие №6. "Чистый СИ"


## Мигающий светодиод.

Задача: Написать программу на C для Arduino, которая будет мигать светодиодом, подключенным к определенному выводу. Используйте простые функции задержки для управления частотой мигания.

```C
#include <avr/io.h>
#include <util/delay.h>

#define LED_PIN 13

int main(void) {
	// Ваш код
    return 0;
}

```
## Кнопка 
Задача: Улучшить предыдущую программу, добавив кнопку. Заставьте светодиод переключать свое состояние (вкл./выкл.) при каждом нажатии кнопки. Используйте digitalRead для ввода с помощью кнопок и при необходимости реализуйте устранение дребезга.

```C
#include <avr/io.h>
#include <util/delay.h>

#define LED_PIN 13
#define BUTTON_PIN 2

int main(void) {
	// Ваш код
	return 0;
}

```
## Датчик
Задача: Подключить аналоговый датчик (например, потенциометр) к аналоговому выводу. Измените программу, чтобы она считывала значение датчика и использовала его для управления яркостью светодиода. Сопоставьте значения аналогового датчика с подходящим диапазоном интенсивности светодиода.

```C
#include <avr/io.h>
#include <util/delay.h>

#define LED_PIN 9
#define SENSOR_PIN 0

void ADC_init() {
	// Ваш код
}

int ADC_read() {
	// Ваш код
}

int main(void) {
	// Ваш код
    return 0;
}

```
## UART

Задача: Реализовать последовательную связь между Arduino и компьютером. Отправляйте данные с Arduino на компьютер через последовательный порт, например значения датчиков или состояние светодиода. Вы можете использовать последовательный монитор на компьютере, чтобы наблюдать за отправкой и получением данных.

```C
#include <avr/io.h>
#include <util/delay.h>

#define LED_PIN 9
#define SENSOR_PIN 0

void ADC_init() {
	// Ваш код
}

void USART_init() {
	// Ваш код
}

void USART_transmit(unsigned char data) {
	// Ваш код
}

int main(void) {
	// Ваш код
    return 0;
}
```

## PWM

Задача: Вместо того, чтобы просто включать и выключать светодиод, используйте ШИМ (широтно-импульсную модуляцию) для более точного управления яркостью светодиода. Создайте программу, которая позволит пользователю вводить желаемый уровень яркости через последовательную связь и соответствующим образом настраивать выход ШИМ.
```C
#include <avr/io.h>
#include <util/delay.h>

#define LED_PIN 9

void USART_init() {
	// Ваш код
}

void USART_transmit(unsigned char data) {
	// Ваш код
}

int main(void) {
	// Ваш код
    return 0;
}

```
## Прерывания 
Задача: Разработать программу, которая использует прерывания и обрабатывает несколько задач одновременно. Например, у вас может быть программа, которая мигает одним светодиодом с фиксированной частотой, считывает данные датчиков в фоновом режиме с помощью прерываний и реагирует на нажатия кнопок с минимальной задержкой. Это потребует тщательного рассмотрения времени и обработки прерываний.

```C
#include <avr/io.h>
#include <avr/interrupt.h>
#include <util/delay.h>

#define LED_PIN 9
#define BUTTON_PIN 2
#define SENSOR_PIN 0

volatile int sensorValue;

ISR(ADC_vect) {
	// Ваш код
}

void ADC_init() {
	// Ваш код
}

void Timer_init() {
	// Ваш код
}

void USART_init() {
	// Ваш код
}

void USART_transmit(unsigned char data) {
	// Ваш код
}

int main(void) {
	// Ваш код
    return 0;
}
```